/* ========================================
   VS1024 - ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆ v4.0
   ã‚¿ãƒ–UI + ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ†é›¢ã‚·ã‚¹ãƒ†ãƒ 
   ======================================== */

/* ========================================
   ğŸ¯ Z-INDEX ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚·ã‚¹ãƒ†ãƒ 
   å¹²æ¸‰é˜²æ­¢ã®ãŸã‚å³å¯†ã«ç®¡ç†
   ======================================== */
:root {
    /* === ãƒ¬ã‚¤ãƒ¤ãƒ¼å®šç¾© === */
    --z-board-bg: 1;          /* ãƒœãƒ¼ãƒ‰èƒŒæ™¯ */
    --z-board-cell: 2;        /* ãƒœãƒ¼ãƒ‰ã‚»ãƒ« */
    --z-tile: 5;              /* ã‚²ãƒ¼ãƒ ã‚¿ã‚¤ãƒ« */
    --z-tile-content: 6;      /* ã‚¿ã‚¤ãƒ«å†…ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
    --z-tile-skill: 15;       /* ã‚¿ã‚¤ãƒ«ä¸Šã‚¹ã‚­ãƒ«ã‚¢ã‚¤ã‚³ãƒ³ */
    --z-tile-skill-inner: 16; /* ã‚¹ã‚­ãƒ«ã‚¢ã‚¤ã‚³ãƒ³å†…éƒ¨ */
    --z-freeze: 30;           /* ãƒ•ãƒªãƒ¼ã‚ºã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ */
    --z-battle-log: 40;       /* ãƒãƒˆãƒ«ãƒ­ã‚° */
    --z-screen: 50;           /* ç”»é¢ãƒ¬ã‚¤ãƒ¤ãƒ¼ */
    --z-skill-bullet: 100;    /* ã‚¹ã‚­ãƒ«å¼¾ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
    --z-modal: 500;           /* ãƒ¢ãƒ¼ãƒ€ãƒ« */
    --z-modal-top: 1000;      /* æœ€ä¸Šä½ãƒ¢ãƒ¼ãƒ€ãƒ« */
    
    /* === åŸºæœ¬ã‚«ãƒ©ãƒ¼ï¼ˆãƒ©ã‚¤ãƒˆãƒ†ãƒ¼ãƒï¼‰ === */
    --bg-primary: #f0f2f5;
    --bg-secondary: #ffffff;
    --bg-card: #ffffff;
    --bg-card-hover: #e4e6eb;
    --accent-cyan: #0095f6;
    --accent-pink: #e91e8c;
    --accent-yellow: #f5a623;
    --accent-green: #00c853;
    --accent-red: #ff3b5c;
    --accent-purple: #8b5cf6;
    --text-primary: #1a1a2e;
    --text-secondary: #65676b;
    
    /* === ã‚¿ã‚¤ãƒ«ã‚«ãƒ©ãƒ¼ï¼ˆã‚²ãƒ¼ãƒ å°‚ç”¨ï¼‰ === */
    --tile-2: #e8edf2;
    --tile-4: #d4dbe3;
    --tile-8: #f2b179;
    --tile-16: #f59563;
    --tile-32: #f67c5f;
    --tile-64: #f65e3b;
    --tile-128: #edcf72;
    --tile-256: #edc850;
    --tile-512: #edc53f;
    --tile-1024: #edc22e;
    --tile-2048: #edc22e;
    
    /* === ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ === */
    --tab-height: 60px;
    --header-height: 50px;
}

html, body {
    height: 100%;
    width: 100%;
    overflow: hidden;
    overscroll-behavior: none;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
}

body {
    font-family: 'Noto Sans JP', sans-serif;
    background: var(--bg-primary);
    color: var(--text-primary);
    position: fixed;
    inset: 0;
    touch-action: none;
}

/* ========================================
   ã‚¢ãƒ—ãƒªã‚³ãƒ³ãƒ†ãƒŠ
   ======================================== */
.app-container {
    display: flex;
    flex-direction: column;
    height: calc(var(--vh, 1vh) * 100);
    width: 100%;
    max-width: 500px;
    margin: 0 auto;
}

/* ========================================
   ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆé€šè²¨è¡¨ç¤ºï¼‰
   ======================================== */
.app-header {
    height: var(--header-height);
    background: var(--bg-secondary);
    border-bottom: 1px solid var(--bg-card);
    display: flex;
    align-items: center;
    justify-content: flex-end;
    padding: 0 15px;
    flex-shrink: 0;
}

.currency-display {
    display: flex;
    gap: 15px;
}

.currency {
    display: flex;
    align-items: center;
    gap: 5px;
    padding: 5px 12px;
    background: var(--bg-card);
    border-radius: 20px;
    font-family: 'Orbitron', sans-serif;
    font-size: 0.85rem;
    font-weight: 700;
}

.currency.crystal {
    border: 1px solid var(--accent-cyan);
    color: var(--accent-cyan);
}

.currency.sp {
    border: 1px solid var(--accent-yellow);
    color: var(--accent-yellow);
}

.currency-icon {
    font-size: 1rem;
}

/* ========================================
   ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢
   ======================================== */
.tab-content-area {
    flex: 1;
    overflow: hidden;
    position: relative;
}

.tab-content {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: none;
    opacity: 0;
    transition: opacity 0.2s ease;
    overflow-y: auto;
    overflow-x: hidden;
}

.tab-content.active {
    display: block;
    opacity: 1;
}

.tab-inner {
    padding: 20px 15px;
    padding-bottom: var(--tab-height);
}

.tab-title {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.5rem;
    font-weight: 900;
    text-align: center;
    margin-bottom: 20px;
    background: linear-gradient(135deg, var(--accent-cyan), var(--accent-pink));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

/* ========================================
   ã‚¿ãƒ–ãƒãƒ¼
   ======================================== */
.tab-bar {
    height: var(--tab-height);
    background: var(--bg-secondary);
    border-top: 1px solid var(--bg-card);
    display: flex;
    justify-content: space-around;
    align-items: center;
    flex-shrink: 0;
    padding-bottom: env(safe-area-inset-bottom, 0);
}

.tab-btn {
    flex: 1;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 2px;
    background: transparent;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s ease;
}

.tab-btn.active {
    color: var(--accent-cyan);
}

.tab-btn:active {
    transform: scale(0.95);
}

.tab-icon {
    width: 28px;
    height: 28px;
    object-fit: contain;
    transition: all 0.2s ease;
    /* ç™½ã„ã‚¹ãƒ—ãƒ©ã‚¤ãƒˆã‚’ã‚°ãƒ¬ãƒ¼ã«åè»¢ */
    filter: invert(50%) sepia(0%) saturate(0%) brightness(80%);
}

.tab-btn.active .tab-icon {
    transform: scale(1.1);
    /* ã‚·ã‚¢ãƒ³ã€œç´«ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é¢¨ï¼ˆfilter ã§è‰²ä»˜ã‘ï¼‰ */
    filter: invert(50%) sepia(100%) saturate(500%) hue-rotate(180deg) brightness(100%);
}

/* ========================================
   ãƒ›ãƒ¼ãƒ ã‚¿ãƒ–
   ======================================== */
.home-tab {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: calc(100% - var(--tab-height));
    gap: 25px;
}

.game-title {
    text-align: center;
}

.title-vs {
    font-family: 'Orbitron', sans-serif;
    font-size: 2rem;
    font-weight: 900;
    color: var(--accent-yellow);
    display: block;
    letter-spacing: 0.3em;
}

.title-1024 {
    font-family: 'Orbitron', sans-serif;
    font-size: 4rem;
    font-weight: 900;
    background: linear-gradient(135deg, var(--accent-cyan), var(--accent-pink));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    display: block;
    animation: glow 2s ease-in-out infinite alternate;
}

@keyframes glow {
    from { filter: drop-shadow(0 0 10px rgba(0, 245, 255, 0.5)); }
    to { filter: drop-shadow(0 0 20px rgba(255, 0, 170, 0.5)); }
}

.vs-button {
    width: 180px;
    height: 180px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent-cyan), var(--accent-pink));
    border: none;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 5px;
    box-shadow: 0 0 40px rgba(0, 245, 255, 0.4), 0 0 80px rgba(255, 0, 170, 0.2);
    transition: all 0.3s ease;
    animation: vsButtonPulse 2s ease infinite;
}

@keyframes vsButtonPulse {
    0%, 100% { transform: scale(1); box-shadow: 0 0 40px rgba(0, 245, 255, 0.4); }
    50% { transform: scale(1.05); box-shadow: 0 0 60px rgba(0, 245, 255, 0.6), 0 0 100px rgba(255, 0, 170, 0.3); }
}

.vs-button:active {
    transform: scale(0.95) !important;
}

.vs-text {
    font-family: 'Orbitron', sans-serif;
    font-size: 2rem;
    font-weight: 900;
    color: white;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

.vs-sub {
    font-size: 0.8rem;
    color: rgba(255, 255, 255, 0.8);
}

.quick-info {
    display: flex;
    gap: 15px;
}

.info-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 3px;
    padding: 12px 20px;
    background: var(--bg-card);
    border-radius: 12px;
    min-width: 100px;
}

.info-icon {
    font-size: 1.2rem;
}

.info-label {
    font-size: 0.65rem;
    color: var(--text-secondary);
}

.info-value {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--accent-cyan);
}

.rules-preview {
    background: var(--bg-card);
    border-radius: 12px;
    padding: 15px 20px;
    width: 100%;
    max-width: 300px;
}

.rules-preview h3 {
    font-size: 0.8rem;
    color: var(--text-secondary);
    margin-bottom: 10px;
    text-align: center;
}

.rules-preview ul {
    list-style: none;
    display: flex;
    justify-content: space-around;
}

.rules-preview li {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 3px;
    font-size: 0.7rem;
    color: var(--text-secondary);
}

.badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 3px 8px;
    border-radius: 4px;
    font-family: 'Orbitron', sans-serif;
    font-size: 0.6rem;
    font-weight: 700;
    color: white;
}

.badge.b128 { background: var(--tile-128); }
.badge.b512 { background: var(--tile-512); }
.badge.b1024 { background: var(--tile-1024); }

/* ========================================
   ã‚¬ãƒãƒ£ç”»é¢
   ======================================== */
.gacha-toggle {
    display: flex;
    gap: 10px;
    margin-bottom: 25px;
}

.gacha-type-btn {
    flex: 1;
    padding: 12px;
    background: var(--bg-card);
    border: 2px solid var(--bg-card);
    border-radius: 10px;
    color: var(--text-secondary);
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s ease;
}

.gacha-type-btn.active {
    border-color: var(--accent-cyan);
    color: var(--accent-cyan);
    background: rgba(0, 245, 255, 0.1);
}

.gacha-display {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    margin-bottom: 25px;
}

.gacha-machine {
    width: 200px;
    height: 200px;
    background: linear-gradient(145deg, var(--bg-card), var(--bg-secondary));
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 3px solid var(--accent-purple);
    box-shadow: 0 0 30px rgba(170, 85, 255, 0.3);
}

.gacha-preview {
    font-family: 'Orbitron', sans-serif;
    font-size: 4rem;
    font-weight: 900;
    color: var(--accent-purple);
    animation: gachaSpin 3s ease infinite;
}

@keyframes gachaSpin {
    0%, 100% { transform: rotate(-5deg); }
    50% { transform: rotate(5deg); }
}

.gacha-info {
    text-align: center;
}

.gacha-rate {
    font-size: 0.7rem;
    color: var(--text-secondary);
}

.gacha-buttons {
    display: flex;
    gap: 15px;
    justify-content: center;
}

.gacha-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
    padding: 15px 30px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.gacha-btn.single {
    background: var(--bg-card);
    border: 2px solid var(--accent-cyan);
    color: var(--text-primary);
}

.gacha-btn.multi {
    background: linear-gradient(135deg, var(--accent-cyan), var(--accent-pink));
    color: white;
}

.gacha-btn:active {
    transform: scale(0.95);
}

.gacha-btn-text {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.1rem;
    font-weight: 700;
}

.gacha-btn-cost {
    font-size: 0.75rem;
    opacity: 0.8;
}

/* ========================================
   ã‚¹ãƒ†ãƒ¼ã‚¸ç”»é¢
   ======================================== */
.stage-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.stage-item {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 15px;
    background: var(--bg-card);
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.2s ease;
    border: 2px solid transparent;
}

.stage-item:hover {
    background: var(--bg-card-hover);
    border-color: var(--accent-cyan);
}

.stage-item.cleared {
    border-color: var(--accent-green);
}

.stage-item.locked {
    opacity: 0.5;
    pointer-events: none;
}

.stage-num {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, var(--accent-cyan), var(--accent-pink));
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Orbitron', sans-serif;
    font-size: 1.1rem;
    font-weight: 900;
    color: white;
}

.stage-name {
    flex: 1;
    font-family: 'Orbitron', sans-serif;
    font-size: 0.9rem;
    font-weight: 700;
}

.stage-reward {
    font-size: 0.8rem;
    color: var(--accent-cyan);
}

.stage-item[data-stage="10"] .stage-name {
    background: linear-gradient(90deg, var(--accent-red), var(--accent-yellow), var(--accent-cyan));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: worldEndGlow 2s ease infinite;
}

@keyframes worldEndGlow {
    0%, 100% { filter: brightness(1); }
    50% { filter: brightness(1.3); }
}

/* ========================================
   ã‚¹ã‚­ãƒ«ç”»é¢
   ======================================== */
.section-subtitle {
    font-size: 0.9rem;
    color: var(--text-secondary);
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.cost-display {
    margin-left: auto;
    font-family: 'Orbitron', sans-serif;
    font-size: 0.8rem;
    color: var(--accent-cyan);
}

.skill-asset-section {
    margin-bottom: 25px;
}

.skill-asset-slots {
    display: flex;
    gap: 8px;
    margin-bottom: 12px;
}

.asset-slot {
    flex: 1;
    aspect-ratio: 1;
    max-width: 50px;
    background: var(--bg-card);
    border: 2px dashed var(--text-secondary);
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s ease;
}

.asset-slot img {
    width: 32px;
    height: 32px;
    object-fit: contain;
}

/* ã‚¢ã‚»ãƒƒãƒˆã‚¹ãƒ­ãƒƒãƒˆå†…ã®ã‚¹ã‚­ãƒ«ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆãƒ¬ã‚¢ãƒªãƒ†ã‚£åˆ¥ï¼‰ */
.asset-skill-icon {
    width: 38px;
    height: 38px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
}

.asset-skill-icon img {
    width: 24px;
    height: 24px;
    object-fit: contain;
    position: relative;
    z-index: 2;
}

.asset-skill-icon.rarity-1 {
    background: linear-gradient(145deg, #666, #555);
    border: 1px solid #888;
}

.asset-skill-icon.rarity-2 {
    background: linear-gradient(145deg, #27ae60, #1e8449);
    border: 1px solid #2ecc71;
}

.asset-skill-icon.rarity-3 {
    background: linear-gradient(145deg, #2980b9, #1a5276);
    border: 1px solid #3498db;
}

.asset-skill-icon.rarity-4 {
    background: linear-gradient(45deg, #f39c12, #d68910);
    border: 1px solid #f1c40f;
    animation: assetGlow4 1.5s ease-in-out infinite;
}

.asset-skill-icon.rarity-5 {
    background: linear-gradient(45deg, #c0392b, #922b21);
    border: 1px solid #e74c3c;
    animation: assetGlow5 1.2s ease-in-out infinite;
}

/* ã‚«ãƒ†ã‚´ãƒªåˆ¥æ è‰²ï¼ˆæ”»æ’ƒ=èµ¤ã€é˜²å¾¡=ç·‘ã€åŠ¹æœ=é’ï¼‰- ãƒ¬ã‚¢ãƒªãƒ†ã‚£ã®èƒŒæ™¯ã¯ç¶­æŒ */
.asset-skill-icon.cat-attack { border-color: #ff3366 !important; }
.asset-skill-icon.cat-defense { border-color: #22c55e !important; }
.asset-skill-icon.cat-effect { border-color: #3b82f6 !important; }

@keyframes assetGlow4 {
    0%, 100% { box-shadow: 0 0 5px rgba(241, 196, 15, 0.5); }
    50% { box-shadow: 0 0 10px rgba(241, 196, 15, 0.8), 0 0 15px rgba(243, 156, 18, 0.4); }
}

@keyframes assetGlow5 {
    0%, 100% { box-shadow: 0 0 5px rgba(231, 76, 60, 0.6); }
    50% { box-shadow: 0 0 12px rgba(231, 76, 60, 0.9), 0 0 18px rgba(192, 57, 43, 0.5); }
}

.asset-slot:hover {
    border-color: var(--accent-cyan);
    color: var(--accent-cyan);
}

.asset-slot.filled {
    border-style: solid;
    border-color: var(--accent-cyan);
    background: rgba(0, 245, 255, 0.1);
}

.asset-presets {
    display: flex;
    align-items: center;
    gap: 8px;
}

.preset-label {
    font-size: 0.75rem;
    color: var(--text-secondary);
}

.preset-btn {
    width: 32px;
    height: 32px;
    background: var(--bg-card);
    border: 2px solid var(--text-secondary);
    border-radius: 8px;
    color: var(--text-secondary);
    font-family: 'Orbitron', sans-serif;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s ease;
}

.preset-btn.active {
    border-color: var(--accent-cyan);
    color: var(--accent-cyan);
    background: rgba(0, 245, 255, 0.1);
}

/* ========================================
   ã‚¹ã‚­ãƒ«ç”»é¢ - æ–°UIæ§‹é€ 
   ======================================== */

/* ãƒ¡ã‚¤ãƒ³ã‚¹ã‚­ãƒ«ç”»é¢ */
.tab-inner.skill-main-screen {
    display: flex;
    flex-direction: column;
    height: 100%;
    padding: 15px;
    padding-bottom: 0;
}

.skill-fixed-header {
    flex-shrink: 0;
    padding-bottom: 10px;
}

.skill-main-buttons {
    display: flex;
    gap: 10px;
    margin: 10px 0;
}

.skill-main-btn {
    flex: 1;
    padding: 12px;
    border: none;
    border-radius: 10px;
    font-family: 'Orbitron', sans-serif;
    font-size: 0.9rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s ease;
}

.skill-main-btn.equip {
    background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
    color: white;
}

.skill-main-btn.upgrade {
    background: linear-gradient(135deg, #f39c12, #e74c3c);
    color: white;
}

.skill-scroll-area {
    flex: 1;
    min-height: 0;
    overflow-y: auto;
    padding: 10px 0;
}

/* ã‚µãƒ–ç”»é¢å…±é€š */
.sub-screen {
    position: fixed;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 100%;
    max-width: 500px;
    bottom: 60px;
    background: var(--bg-primary);
    z-index: 100;
    display: flex;
    flex-direction: column;
}

.sub-screen.hidden {
    display: none;
}

.sub-screen-header {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 15px;
    background: var(--bg-card);
    border-bottom: 1px solid var(--text-disabled);
}

.sub-screen-header.fixed-header {
    flex-shrink: 0;
}

.sub-screen-header h2 {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.1rem;
    margin: 0;
}

.sub-screen-header .back-btn {
    display: none; /* ãƒ˜ãƒƒãƒ€ãƒ¼å†…ã®æˆ»ã‚‹ãƒœã‚¿ãƒ³ã¯éè¡¨ç¤º */
}

/* æˆ»ã‚‹ãƒœã‚¿ãƒ³ - å·¦ä¸‹å›ºå®š */
.sub-screen .floating-back-btn {
    position: fixed;
    bottom: calc(var(--tab-height) + 15px);
    left: 15px;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
    border: none;
    color: white;
    font-size: 1.5rem;
    cursor: pointer;
    z-index: 9999;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.sub-screen .floating-back-btn:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
}

.sub-screen .floating-back-btn:active {
    transform: scale(0.95);
}

/* ãƒ—ãƒªã‚»ãƒƒãƒˆé¸æŠç”»é¢ */
.preset-list {
    flex: 1;
    overflow-y: auto;
    padding: 15px;
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.preset-item {
    background: var(--bg-card);
    border-radius: 10px;
    padding: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    border: 2px solid transparent;
}

.preset-item:hover {
    border-color: var(--accent-cyan);
}

.preset-item-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 5px;
}

.preset-item-name {
    font-weight: 600;
    font-size: 0.54rem;
}

.preset-item-cost {
    color: var(--accent-cyan);
    font-size: 0.51rem;
}

.preset-item-skills {
    display: flex;
    gap: 4px;
}

/* ãƒ—ãƒªã‚»ãƒƒãƒˆé¸æŠç”»é¢ã®ã‚¹ã‚­ãƒ«ã‚¹ãƒ­ãƒƒãƒˆ */
.preset-skill-slot {
    width: 50px;
    height: 55px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.preset-skill-slot.empty {
    border: 2px dashed var(--text-disabled);
    background: rgba(0, 0, 0, 0.05);
}

.preset-skill-slot.filled {
    border: none;
}

/* ãƒ—ãƒªã‚»ãƒƒãƒˆé¸æŠç”»é¢ç”¨ãƒŸãƒ‹ã‚µã‚¤ã‚º */
.skill-frame-card.preset-mini-size {
    width: 50px;
    height: 55px;
}
.skill-frame-card.preset-mini-size .frame-inner {
    width: 100%;
    height: 100%;
}
.skill-frame-card.preset-mini-size .skill-icon-img {
    width: 28px;
    height: 28px;
}
.skill-frame-card.preset-mini-size .skill-name {
    display: none;
}
.skill-frame-card.preset-mini-size .skill-level-badge {
    font-size: 0.5rem;
    bottom: 2px;
    right: 2px;
    padding: 1px 3px;
}
/* è§’ä¸¸å››è§’ã«çµ±ä¸€ */
.skill-frame-card.preset-mini-size::before,
.skill-frame-card.preset-mini-size::after {
    border-radius: 8px !important;
    clip-path: none !important;
    width: 100% !important;
    height: 100% !important;
}
.skill-frame-card.preset-mini-size.cat-attack::before {
    width: 48px !important;
    height: 53px !important;
}
.skill-frame-card.preset-mini-size.cat-defense::before {
    width: 46px !important;
    height: 51px !important;
}
.skill-frame-card.preset-mini-size.cat-effect::before {
    width: 50px !important;
    height: 55px !important;
}
.skill-frame-card.preset-mini-size.cat-effect::after {
    width: 46px !important;
    height: 51px !important;
}

.preset-skill-mini {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    overflow: hidden;
}

.preset-skill-mini img {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

/* ãƒ—ãƒªã‚»ãƒƒãƒˆç·¨é›†ç”»é¢ */
.preset-edit-slots {
    display: flex;
    justify-content: center;
    gap: 10px;
    padding: 15px;
    background: var(--bg-card);
}

.preset-edit-slot {
    width: 55px;
    height: 60px;
    border: 2px dashed var(--text-secondary);
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    position: relative;
    background: var(--bg-card);
}

.preset-edit-slot.filled {
    border: 2px solid var(--accent-cyan);
    background: var(--bg-card);
    overflow: hidden;
}

/* ã‚¹ãƒ­ãƒƒãƒˆå†…ã®ã‚¹ã‚­ãƒ«ã‚«ãƒ¼ãƒ‰ã‚’ã‚·ãƒ³ãƒ—ãƒ«ãªè§’ä¸¸å››è§’ã«çµ±ä¸€ */
.preset-edit-slot .skill-frame-card {
    width: 100% !important;
    height: 100% !important;
    margin: 0;
    border-radius: 8px !important;
    clip-path: none !important;
}

.preset-edit-slot .skill-frame-card::before,
.preset-edit-slot .skill-frame-card::after {
    border-radius: 8px !important;
    clip-path: none !important;
}

.preset-edit-slot .skill-frame-card .frame-inner {
    border-radius: 8px !important;
    clip-path: none !important;
}

.preset-edit-slot .skill-frame-card .frame-inner img {
    width: 28px !important;
    height: 28px !important;
}

.preset-edit-slot .skill-frame-card .skill-name {
    display: none;
}

.preset-edit-slot .skill-frame-card .particles {
    border-radius: 8px !important;
    clip-path: none !important;
}

.preset-cost-display {
    font-family: 'Orbitron', sans-serif;
    font-size: 0.9rem;
    color: var(--accent-cyan);
}

.save-preset-btn {
    margin: 10px 15px;
    padding: 12px;
    background: var(--accent-cyan);
    color: var(--bg-primary);
    border: none;
    border-radius: 10px;
    font-family: 'Orbitron', sans-serif;
    font-weight: 700;
    cursor: pointer;
}

.preset-edit-scroll {
    flex: 1;
    overflow-y: auto;
    padding: 15px;
}

/* ã‚¹ã‚­ãƒ«å¼·åŒ–ç”»é¢ */
.upgrade-main-area {
    padding: 20px;
    background: var(--bg-card);
    flex-shrink: 0;
}

.upgrade-display {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    margin-bottom: 20px;
}

.upgrade-skill-slot {
    width: 80px;
    height: 90px;
    border: 2px dashed var(--text-secondary);
    border-radius: 12px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    position: relative;
    overflow: hidden;
}

.upgrade-skill-slot.filled {
    border: 2px solid var(--accent-purple);
    background: var(--bg-card);
}

/* å¼·åŒ–ã‚¹ãƒ­ãƒƒãƒˆå†…ã®ã‚¹ã‚­ãƒ«ã‚«ãƒ¼ãƒ‰ã‚’è§’ä¸¸å››è§’ã«çµ±ä¸€ */
.upgrade-skill-slot .skill-frame-card {
    width: 100% !important;
    height: 100% !important;
    margin: 0;
    border-radius: 10px !important;
    clip-path: none !important;
}

.upgrade-skill-slot .skill-frame-card::before,
.upgrade-skill-slot .skill-frame-card::after {
    border-radius: 10px !important;
    clip-path: none !important;
}

.upgrade-skill-slot .skill-frame-card .frame-inner {
    border-radius: 10px !important;
    clip-path: none !important;
}

.upgrade-skill-slot .skill-frame-card .frame-inner img {
    width: 36px !important;
    height: 36px !important;
}

.upgrade-skill-slot .skill-frame-card .skill-name {
    font-size: 0.55rem !important;
}

.upgrade-skill-slot .skill-frame-card .skill-level-badge {
    bottom: 4px !important;
    font-size: 0.6rem !important;
}

.upgrade-skill-slot .skill-frame-card .particles {
    border-radius: 10px !important;
    clip-path: none !important;
}

.slot-label {
    font-size: 0.65rem;
    color: var(--text-secondary);
}

.upgrade-arrow {
    font-size: 2rem;
    color: var(--accent-purple);
}

.upgrade-materials-row {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-bottom: 15px;
}

.material-slot {
    width: 50px;
    height: 55px;
    border: 2px dashed var(--text-secondary);
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.7rem;
    color: var(--text-secondary);
    cursor: pointer;
    background: var(--bg-card);
    overflow: hidden;
    position: relative;
}

.material-slot.same-skill {
    border-color: var(--accent-cyan) !important;
}

.material-slot.same-rarity {
    border-color: var(--accent-purple) !important;
}

.material-slot.filled {
    border: none !important;
    background: transparent !important;
}

/* ç´ æã‚¹ãƒ­ãƒƒãƒˆå†…ã®ã‚¹ã‚­ãƒ«ã‚«ãƒ¼ãƒ‰ï¼ˆãƒ—ãƒªã‚»ãƒƒãƒˆã¨åŒã˜ã‚¹ã‚¿ã‚¤ãƒ«ï¼‰ */
.material-slot .skill-frame-card {
    width: 100% !important;
    height: 100% !important;
    margin: 0;
    border-radius: 8px !important;
    clip-path: none !important;
}

.material-slot .skill-frame-card::before,
.material-slot .skill-frame-card::after {
    border-radius: 8px !important;
    clip-path: none !important;
}

.material-slot .skill-frame-card .frame-inner {
    border-radius: 8px !important;
    clip-path: none !important;
}

.material-slot .skill-frame-card .frame-inner img {
    width: 26px !important;
    height: 26px !important;
}

.material-slot .skill-frame-card .skill-name {
    display: none;
}

.material-slot .skill-frame-card .particles {
    border-radius: 8px !important;
    clip-path: none !important;
}

.upgrade-confirm-btn {
    width: 100%;
    padding: 12px;
    background: var(--accent-purple);
    color: white;
    border: none;
    border-radius: 10px;
    font-family: 'Orbitron', sans-serif;
    font-weight: 700;
    cursor: pointer;
}

.upgrade-confirm-btn:disabled {
    background: var(--text-disabled);
    cursor: not-allowed;
}

.upgrade-scroll-area {
    flex: 1;
    overflow-y: auto;
    padding: 15px;
}

/* å„ãƒ¢ãƒ¼ãƒ‰ã®ã‚¹ã‚­ãƒ«ä¸€è¦§ */
.skill-inventory.preset-mode .skill-frame-card.disabled {
    opacity: 0.4;
    pointer-events: none;
}

.skill-inventory-section {
    margin-bottom: 20px;
}

.skill-inventory {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 5px;
    justify-items: center;
}

/* ========================================
   ã‚¹ã‚­ãƒ«ç”»é¢ - è¿½åŠ UI
   ======================================== */

/* ã‚¢ã‚»ãƒƒãƒˆãƒ˜ãƒƒãƒ€ãƒ¼ */
.asset-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.asset-actions {
    display: flex;
    gap: 8px;
}

.btn-auto-set {
    padding: 4px 10px;
    font-size: 0.7rem;
    background: var(--bg-card);
    border: 1px solid var(--accent-green);
    border-radius: 4px;
    color: var(--accent-green);
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-auto-set:hover {
    background: var(--accent-green);
    color: white;
}

.btn-clear-all {
    padding: 4px 10px;
    font-size: 0.7rem;
    background: var(--bg-card);
    border: 1px solid var(--accent-red);
    border-radius: 4px;
    color: var(--accent-red);
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-clear-all:hover {
    background: var(--accent-red);
    color: white;
}

#remaining-cost {
    font-size: 0.7rem;
    color: var(--text-secondary);
}

/* ã‚³ã‚¹ãƒˆè­¦å‘Š */
.cost-warning {
    font-size: 0.7rem;
    color: var(--accent-red);
    text-align: center;
    margin-top: 8px;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.cost-warning.visible {
    opacity: 1;
}

/* ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªãƒ˜ãƒƒãƒ€ãƒ¼ */
.inventory-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

/* ã‚½ãƒ¼ãƒˆãƒœã‚¿ãƒ³ */
.sort-buttons {
    display: flex;
    gap: 4px;
}

.sort-btn {
    padding: 3px 8px;
    font-size: 0.65rem;
    background: var(--bg-card);
    border: 1px solid var(--text-secondary);
    border-radius: 4px;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s ease;
}

.sort-btn.active {
    border-color: var(--accent-cyan);
    color: var(--accent-cyan);
    background: rgba(0, 170, 255, 0.1);
}

/* æš—è»¢ã‚¹ã‚­ãƒ«ã‚«ãƒ¼ãƒ‰ï¼ˆã‚³ã‚¹ãƒˆä¸è¶³ï¼‰ */
.skill-frame-card.disabled {
    opacity: 0.4;
    filter: grayscale(0.6);
    pointer-events: none;
}

/* æœªæ‰€æŒã‚¹ã‚­ãƒ« - è‰²ã ã‘ã‚°ãƒ¬ãƒ¼ï¼ˆæ§‹é€ ã¯ãã®ã¾ã¾ï¼‰ */
.skill-frame-card.not-owned {
    filter: grayscale(100%);
    opacity: 0.7;
}

/* æœªæ‰€æŒã‚¹ã‚­ãƒ«è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ« - ã‚°ãƒ¬ãƒ¼è¡¨ç¤º */
.skill-detail-modal.not-owned-detail .skill-frame-card {
    filter: grayscale(100%);
}

.skill-detail-modal.not-owned-detail .detail-content {
    filter: grayscale(100%);
}

/* è£…å‚™ä¸­ãƒãƒƒã‚¸ã¯åˆ¥è¦ç´ ã§å®Ÿè£…ï¼ˆ::afterã¨ã®ç«¶åˆå›é¿ï¼‰ */
.skill-frame-card.equipped-indicator {
    position: relative;
}

.equipped-badge {
    position: absolute;
    top: 3px;
    right: 3px;
    padding: 2px 5px;
    font-size: 0.5rem;
    background: var(--accent-green);
    color: white;
    border-radius: 3px;
    z-index: 20;
    pointer-events: none;
}

/* ========================================
   ãƒ—ãƒªã‚»ãƒƒãƒˆé¸æŠãƒ¢ãƒ¼ãƒ€ãƒ«
   ======================================== */
.preset-select {
    max-width: 350px;
}

.preset-select h2 {
    text-align: center;
    margin-bottom: 10px;
    font-size: 1.1rem;
    color: var(--text-primary);
}

.preset-hint {
    text-align: center;
    font-size: 0.75rem;
    color: var(--text-secondary);
    margin-bottom: 15px;
}

.preset-select-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 20px;
}

.preset-select-item {
    padding: 12px 15px;
    background: var(--bg-card);
    border: 2px solid transparent;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.preset-select-item:hover {
    background: var(--bg-card-hover);
}

.preset-select-item.selected {
    border-color: var(--accent-cyan);
    background: rgba(0, 170, 255, 0.1);
}

.preset-select-item.invalid {
    opacity: 0.5;
    border-color: var(--accent-red);
}

.preset-item-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 8px;
}

.preset-number {
    font-weight: 700;
    font-size: 0.9rem;
    color: var(--text-primary);
}

.preset-cost {
    font-size: 0.75rem;
    color: var(--accent-cyan);
}

.preset-cost.invalid {
    color: var(--accent-red);
}

.preset-skills {
    display: flex;
    gap: 5px;
    min-height: 30px;
}

.preset-skill-icon {
    width: 32px;
    height: 32px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
}

.preset-skill-icon img {
    width: 20px;
    height: 20px;
    object-fit: contain;
    position: relative;
    z-index: 2;
}

/* ãƒ—ãƒªã‚»ãƒƒãƒˆã‚¹ã‚­ãƒ«ã‚¢ã‚¤ã‚³ãƒ³ - ãƒ¬ã‚¢ãƒªãƒ†ã‚£åˆ¥ */
.preset-skill-icon.rarity-1 {
    background: linear-gradient(145deg, #666, #555);
    border: 1px solid #888;
}
.preset-skill-icon.rarity-2 {
    background: linear-gradient(145deg, #27ae60, #1e8449);
    border: 1px solid #2ecc71;
}
.preset-skill-icon.rarity-3 {
    background: linear-gradient(145deg, #2980b9, #1a5276);
    border: 1px solid #3498db;
}
.preset-skill-icon.rarity-4 {
    background: linear-gradient(45deg, #f39c12, #d68910);
    border: 1px solid #f1c40f;
    animation: presetGlow4 1.5s ease-in-out infinite;
}
.preset-skill-icon.rarity-5 {
    background: linear-gradient(45deg, #c0392b, #922b21);
    border: 1px solid #e74c3c;
    animation: presetGlow5 1.2s ease-in-out infinite;
}

/* ã‚«ãƒ†ã‚´ãƒªåˆ¥æ è‰²ï¼ˆæ”»æ’ƒ=èµ¤ã€é˜²å¾¡=ç·‘ã€åŠ¹æœ=é’ï¼‰- ãƒ¬ã‚¢ãƒªãƒ†ã‚£ã®èƒŒæ™¯ã¯ç¶­æŒ */
.preset-skill-icon.cat-attack { border-color: #ff3366 !important; }
.preset-skill-icon.cat-defense { border-color: #22c55e !important; }
.preset-skill-icon.cat-effect { border-color: #3b82f6 !important; }

@keyframes presetGlow4 {
    0%, 100% { box-shadow: 0 0 4px rgba(241, 196, 15, 0.5); }
    50% { box-shadow: 0 0 8px rgba(241, 196, 15, 0.8); }
}
@keyframes presetGlow5 {
    0%, 100% { box-shadow: 0 0 4px rgba(231, 76, 60, 0.6); }
    50% { box-shadow: 0 0 10px rgba(231, 76, 60, 0.9); }
}

.preset-empty-text {
    font-size: 0.7rem;
    color: var(--text-secondary);
}

.preset-select-actions {
    display: flex;
    gap: 10px;
    justify-content: center;
}

.preset-select-actions .action-btn {
    flex: 1;
    max-width: 140px;
}

.action-btn.start {
    background: var(--accent-green);
    color: white;
}

.action-btn.start:hover {
    background: #00bb77;
}

.action-btn.start:disabled {
    background: var(--bg-card);
    color: var(--text-secondary);
    cursor: not-allowed;
}

.action-btn.cancel {
    background: var(--bg-card);
    border: 1px solid var(--text-secondary);
    color: var(--text-secondary);
}

.action-btn.cancel:hover {
    background: var(--bg-card-hover);
}

/* ========================================
   ã‚¹ã‚­ãƒ«å¼·åŒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³
   ======================================== */
.skill-level-display {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 8px;
}

.level-label {
    font-size: 0.75rem;
    color: var(--text-secondary);
}

.level-stars {
    font-size: 0.9rem;
    color: #ff69b4;
    letter-spacing: 2px;
}

.level-stars .filled {
    color: #ff69b4;
}

.level-stars .empty {
    color: #ccc;
    opacity: 0.5;
}

/* å¼·åŒ–åŠ¹æœä¸€è¦§ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
.upgrade-effects-section {
    margin: 15px 0;
    padding: 10px;
    background: var(--bg-card);
    border-radius: 10px;
}

.upgrade-effects-title {
    font-size: 0.75rem;
    color: var(--text-secondary);
    text-align: center;
    margin-bottom: 10px;
}

.upgrade-effects-list {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.upgrade-effect-row {
    display: flex;
    gap: 8px;
    font-size: 0.8rem;
    padding: 4px 8px;
    border-radius: 5px;
}

.upgrade-effect-row.reached {
    color: var(--text-primary);
    background: rgba(255, 105, 180, 0.1);
}

.upgrade-effect-row.reached .effect-level {
    color: #ff69b4;
}

.upgrade-effect-row.not-reached {
    color: var(--text-disabled);
    opacity: 0.5;
}

.effect-level {
    font-weight: 600;
    min-width: 30px;
}

.effect-desc {
    flex: 1;
}

.action-btn.upgrade {
    background: var(--accent-purple);
    color: white;
}

.action-btn.upgrade:hover {
    background: #7c3aed;
}

.action-btn.upgrade:disabled {
    background: var(--bg-card);
    color: var(--text-secondary);
    cursor: not-allowed;
}

/* ã‚¹ã‚­ãƒ«ã‚«ãƒ¼ãƒ‰ã®å¼·åŒ–ãƒ¬ãƒ™ãƒ«ãƒãƒƒã‚¸ - è¦‹ã‚„ã™ãæ”¹å–„ */
/* å¼·åŒ–ãƒ¬ãƒ™ãƒ«æ˜Ÿãƒãƒƒã‚¸ï¼ˆãƒ”ãƒ³ã‚¯ã€èƒŒæ™¯ãªã—ï¼‰ */
/* å¼·åŒ–ãƒ¬ãƒ™ãƒ«æ˜Ÿãƒãƒƒã‚¸ï¼ˆãƒ”ãƒ³ã‚¯ã€èƒŒæ™¯ãªã—ï¼‰ */
.skill-level-badge {
    position: absolute;
    bottom: 2px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.7rem;
    color: #ff69b4;  /* ãƒ”ãƒ³ã‚¯ */
    background: none;
    padding: 0;
    border: none;
    text-shadow: 
        0 0 4px rgba(255, 105, 180, 0.8),
        0 1px 1px rgba(0, 0, 0, 0.5);
    letter-spacing: 1px;
    z-index: 25;
    white-space: nowrap;
}

/* è©³ç´°ç”»é¢ç”¨ãƒ¬ãƒ™ãƒ«ãƒãƒƒã‚¸ */
.detail-level-badge {
    display: block;
    text-align: center;
    margin-top: 5px;
    font-size: 1rem;
    color: #ff69b4;
    text-shadow: 
        0 0 6px rgba(255, 105, 180, 0.8),
        0 1px 2px rgba(0, 0, 0, 0.5);
    letter-spacing: 2px;
}

@keyframes starShine {
    0%, 100% { 
        text-shadow: 
            0 0 6px rgba(255, 215, 0, 1),
            0 0 12px rgba(255, 215, 0, 0.8);
    }
    50% { 
        text-shadow: 
            0 0 10px rgba(255, 215, 0, 1),
            0 0 20px rgba(255, 215, 0, 1),
            0 0 30px rgba(255, 215, 0, 0.6);
    }
}

/* ã‚¹ã‚­ãƒ«æ‰€æŒæ•°ãƒãƒƒã‚¸ */
.skill-count {
    position: absolute;
    top: 5px;
    right: 5px;
    font-size: 0.6rem;
    background: var(--accent-cyan);
    color: white;
    padding: 2px 5px;
    border-radius: 4px;
    font-weight: 700;
}

/* ========================================
   ğŸ¨ ã‚¹ã‚­ãƒ«ãƒ•ãƒ¬ãƒ¼ãƒ ã‚·ã‚¹ãƒ†ãƒ ï¼ˆç‹¬ç«‹ã‚¹ã‚³ãƒ¼ãƒ—ï¼‰
   æ”»æ’ƒ=å††ã€é˜²å¾¡=è§’ä¸¸æ­£æ–¹å½¢ã€åŠ¹æœ=è§’ä¸¸å…«è§’å½¢
   â€»ã‚²ãƒ¼ãƒ ã‚¿ã‚¤ãƒ«ã¨ã¯å®Œå…¨ã«åˆ†é›¢
   ======================================== */

/* ã‚¹ã‚­ãƒ«å°‚ç”¨ã‚«ãƒ©ãƒ¼å¤‰æ•°ï¼ˆ.skill-*ã‚¯ãƒ©ã‚¹å†…ã§ã®ã¿ä½¿ç”¨ï¼‰ */
.skill-frame-card,
.tile-skill-frame {
    --sk-rarity-1: #9ca3af;
    --sk-rarity-1-glow: rgba(156, 163, 175, 0.5);
    --sk-rarity-2: #34d399;
    --sk-rarity-2-glow: rgba(52, 211, 153, 0.6);
    --sk-rarity-3: #60a5fa;
    --sk-rarity-3-glow: rgba(96, 165, 250, 0.7);
    --sk-rarity-4: #fbbf24;
    --sk-rarity-4-glow: rgba(251, 191, 36, 0.8);
    --sk-rarity-4-accent: #f59e0b;
    --sk-rarity-5: #f472b6;
    --sk-rarity-5-glow: rgba(244, 114, 182, 0.9);
    --sk-rarity-5-accent: #ec4899;
    --sk-octagon: polygon(30% 0%, 70% 0%, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0% 70%, 0% 30%);
}

/* ========================================
   ã‚¹ã‚­ãƒ«ã‚«ãƒ¼ãƒ‰ - ãƒ™ãƒ¼ã‚¹
   ======================================== */
.skill-frame-card {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    width: 95px;
    height: 105px;
}

.skill-frame-card:hover {
    transform: translateY(-3px) scale(1.02);
}

.skill-frame-card:active {
    transform: scale(0.98);
}

/* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ - æœ€å‰é¢ */
.skill-frame-card .frame-inner {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 6px;
    z-index: 10;
    pointer-events: none;
    padding-top: 5px;
    overflow: hidden;
    width: 100%;
    height: 100%;
}

.skill-frame-card .skill-icon-img {
    width: 38px;
    height: 38px;
    object-fit: contain;
    transition: all 0.3s ease;
}

.skill-frame-card .skill-name {
    font-size: 0.6rem;
    font-weight: 600;
    color: #f8fafc;
    text-align: center;
    line-height: 1.15;
    max-width: 72px;
    word-break: break-all;
    transition: all 0.3s ease;
    /* å½±ãªã— */
}

.skill-frame-card .skill-count {
    position: absolute;
    top: 2px;
    right: 2px;
    background: linear-gradient(135deg, #ec4899, #be185d);
    color: white;
    font-size: 0.55rem;
    font-weight: 700;
    padding: 2px 6px;
    border-radius: 10px;
    z-index: 20;
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
}

/* ========================================
   ã‚«ãƒ†ã‚´ãƒªåˆ¥å½¢çŠ¶ + æ è‰²
   æ è‰² = ã‚«ãƒ†ã‚´ãƒªï¼ˆæ”»æ’ƒ=èµ¤ã€é˜²å¾¡=ç·‘ã€åŠ¹æœ=é’ï¼‰
   èƒŒæ™¯ = ãƒ¬ã‚¢ãƒªãƒ†ã‚£
   ======================================== */

/* ã‚«ãƒ†ã‚´ãƒªåˆ¥æ è‰²ï¼ˆ--frame-colorã‚’ä¸Šæ›¸ãï¼‰ */
.skill-frame-card.cat-attack { --frame-color: #ff3366 !important; }
.skill-frame-card.cat-defense { --frame-color: #22c55e !important; }
.skill-frame-card.cat-effect { --frame-color: #3b82f6 !important; }

/* ğŸ”´ æ”»æ’ƒç³» - å††å½¢ï¼ˆåŠ›å¼·ã•ï¼‰ */
.skill-frame-card.cat-attack::before {
    content: '';
    position: absolute;
    width: 88px;
    height: 88px;
    border-radius: 50%;
    background: var(--rarity-bg, #999);
    border: 2px solid var(--frame-color);
    z-index: 1;
    transition: all 0.3s ease;
}

/* ğŸŸ¢ é˜²å¾¡ç³» - è§’ä¸¸æ­£æ–¹å½¢ï¼ˆå …ç‰¢ã•ï¼‰ */
.skill-frame-card.cat-defense::before {
    content: '';
    position: absolute;
    width: 82px;
    height: 90px;
    border-radius: 16px;
    background: var(--rarity-bg, #999);
    border: 2px solid var(--frame-color);
    z-index: 1;
    transition: all 0.3s ease;
}

/* ğŸ”µ åŠ¹æœç³» - è§’ä¸¸å…«è§’å½¢ï¼ˆç¥ç§˜ï¼‰ - 2å±¤æ§‹é€ ã§æ ç·šè¡¨ç¾ */
/* å¤–å´ï¼šæ ç·šè‰²ã®å…«è§’å½¢ */
.skill-frame-card.cat-effect::before {
    content: '';
    position: absolute;
    width: 88px;
    height: 92px;
    clip-path: var(--sk-octagon);
    background: var(--frame-color);
    z-index: 1;
    transition: all 0.3s ease;
}
/* å†…å´ï¼šèƒŒæ™¯è‰²ã®å…«è§’å½¢ï¼ˆå°‘ã—å°ã•ã„ï¼‰ */
.skill-frame-card.cat-effect::after {
    content: '';
    position: absolute;
    width: 84px;
    height: 88px;
    clip-path: var(--sk-octagon);
    background: var(--rarity-bg, #999);
    z-index: 2;
    transition: all 0.3s ease;
}

/* ========================================
   â˜…1 - ã‚³ãƒ¢ãƒ³ï¼ˆã‚°ãƒ¬ãƒ¼èƒŒæ™¯ãƒ»å¾®å¦™ãªè„ˆå‹•ï¼‰
   ======================================== */
.skill-frame-card.rarity-1 { 
    --frame-color: #888;
    --rarity-bg: linear-gradient(145deg, #666, #555);
}
.skill-frame-card.rarity-1 .skill-name { color: #ccc; }
/* æ”»æ’ƒãƒ»é˜²å¾¡ç³»ï¼ˆ::beforeãŒèƒŒæ™¯ï¼‰ */
.skill-frame-card.rarity-1.cat-attack::before,
.skill-frame-card.rarity-1.cat-defense::before {
    animation: rarity1Pulse 4s ease-in-out infinite;
}
/* åŠ¹æœç³»ï¼ˆ::afterãŒèƒŒæ™¯ï¼‰ */
.skill-frame-card.rarity-1.cat-effect::after {
    animation: rarity1Pulse 4s ease-in-out infinite;
}

@keyframes rarity1Pulse {
    0%, 100% { filter: brightness(1); }
    50% { filter: brightness(1.08); }
}

/* ========================================
   â˜…2 - ã‚¢ãƒ³ã‚³ãƒ¢ãƒ³ï¼ˆç·‘ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»è„ˆå‹•ï¼‰
   ======================================== */
.skill-frame-card.rarity-2 { 
    --frame-color: #2ecc71;
    --rarity-bg: linear-gradient(145deg, #27ae60, #0d4d2a);
}
.skill-frame-card.rarity-2 .skill-name { color: #fff; }
.skill-frame-card.rarity-2.cat-attack::before,
.skill-frame-card.rarity-2.cat-defense::before {
    animation: rarity2Pulse 3s ease-in-out infinite;
}
.skill-frame-card.rarity-2.cat-effect::after {
    animation: rarity2Pulse 3s ease-in-out infinite;
}

@keyframes rarity2Pulse {
    0%, 100% { filter: brightness(1); }
    50% { filter: brightness(1.2); }
}

/* ========================================
   â˜…3 - ãƒ¬ã‚¢ï¼ˆé’ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»å‹•çš„ + è„ˆå‹•ï¼‰
   ======================================== */
.skill-frame-card.rarity-3 { 
    --frame-color: #3498db;
    --rarity-bg: linear-gradient(45deg, #2980b9, #1a5276, #3498db, #2471a3);
}
.skill-frame-card.rarity-3 .skill-name { color: #fff; }
.skill-frame-card.rarity-3.cat-attack::before,
.skill-frame-card.rarity-3.cat-defense::before {
    background-size: 300% 300%;
    animation: rarity3BgMove 2.5s ease infinite, rarity3Pulse 1.5s ease-in-out infinite;
}
.skill-frame-card.rarity-3.cat-effect::after {
    background-size: 300% 300%;
    animation: rarity3BgMove 2.5s ease infinite, rarity3Pulse 1.5s ease-in-out infinite;
}

@keyframes rarity3BgMove {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

@keyframes rarity3Pulse {
    0%, 100% { filter: brightness(1); }
    50% { filter: brightness(1.25); }
}

/* ========================================
   â˜…4 - ã‚¨ãƒ”ãƒƒã‚¯ï¼ˆç‡ƒãˆä¸ŠãŒã‚‹é»„é‡‘ã®ç‚ + ç«ã®ç²‰ï¼‰
   é»„è‰²ãƒ»ã‚ªãƒ¬ãƒ³ã‚¸ãƒ™ãƒ¼ã‚¹ã®ç‚æ¼”å‡º
   ======================================== */
.skill-frame-card.rarity-4 { 
    --frame-color: #f1c40f;
    --rarity-bg: linear-gradient(
        0deg,
        #5c4a00 0%,      /* æ·±ã„ã‚´ãƒ¼ãƒ«ãƒ‰ï¼ˆç‚ã®æ ¹å…ƒï¼‰ */
        #8b6914 15%,     /* ãƒ€ãƒ¼ã‚¯ã‚´ãƒ¼ãƒ«ãƒ‰ */
        #b8860b 30%,     /* ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ãƒ­ãƒƒãƒ‰ */
        #daa520 45%,     /* æ˜ã‚‹ã„ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ãƒ­ãƒƒãƒ‰ */
        #f39c12 60%,     /* ã‚ªãƒ¬ãƒ³ã‚¸ */
        #f1c40f 75%,     /* ã‚´ãƒ¼ãƒ«ãƒ‰ */
        #ffd700 90%,     /* æ˜ã‚‹ã„ã‚´ãƒ¼ãƒ«ãƒ‰ */
        #ffff00 100%     /* é»„è‰²ï¼ˆç‚ã®å…ˆç«¯ï¼‰ */
    );
}
.skill-frame-card.rarity-4 .skill-name { 
    color: #fff; 
    text-shadow: 0 0 8px #ffd700, 0 0 16px #f39c12, 0 0 24px #b8860b;
}

/* æ”»æ’ƒãƒ»é˜²å¾¡ç³»ã®èƒŒæ™¯ - ç‚ãŒç‡ƒãˆä¸ŠãŒã‚‹ */
.skill-frame-card.rarity-4.cat-attack::before,
.skill-frame-card.rarity-4.cat-defense::before {
    background-size: 100% 400%;
    animation: rarity4Flame 1.5s ease-in-out infinite, rarity4Pulse 0.8s ease-in-out infinite;
}
/* åŠ¹æœç³»ã®èƒŒæ™¯ï¼ˆä¸¸ãƒ»å››è§’ã¨åŒã˜ã::beforeï¼‰ */
.skill-frame-card.rarity-4.cat-effect::after {
    background-size: 100% 400%;
    animation: rarity4Flame 1.5s ease-in-out infinite, rarity4Pulse 0.8s ease-in-out infinite;
}

/* ç‚ãŒä¸‹ã‹ã‚‰ä¸Šã«ç‡ƒãˆä¸ŠãŒã‚‹ */
@keyframes rarity4Flame {
    0%, 100% { background-position: 0% 100%; }
    50% { background-position: 0% 0%; }
}

/* æ¿€ã—ã„æ˜æš—ã®è„ˆå‹• */
@keyframes rarity4Pulse {
    0%, 100% { filter: brightness(1) saturate(1.2); }
    50% { filter: brightness(1.4) saturate(1.5); }
}

/* â˜…4 ã‚­ãƒ©ã‚­ãƒ©å…‰ç‚¹ï¼ˆã‚·ãƒãƒ¼ï¼‰- æ å†…ã§ç‚¹æ»… */
.skill-frame-card.rarity-4 .frame-inner::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
        radial-gradient(4px 4px at 25% 20%, #fff 0%, transparent 70%),
        radial-gradient(3px 3px at 70% 35%, #ffd700 0%, transparent 70%),
        radial-gradient(4px 4px at 45% 60%, #fff 0%, transparent 70%),
        radial-gradient(3px 3px at 15% 75%, #ffd700 0%, transparent 70%),
        radial-gradient(4px 4px at 80% 70%, #fff 0%, transparent 70%),
        radial-gradient(3px 3px at 55% 85%, #ffd700 0%, transparent 70%),
        radial-gradient(4px 4px at 30% 45%, #ffaa00 0%, transparent 70%),
        radial-gradient(3px 3px at 85% 25%, #fff 0%, transparent 70%);
    animation: rarity4Shimmer 2s ease-in-out infinite;
    pointer-events: none;
    z-index: 4;
    border-radius: inherit;
    clip-path: inherit;
}

/* ã‚­ãƒ©ã‚­ãƒ©ç‚¹æ»…ï¼ˆæ å†…ã§å›ºå®šã€ç§»å‹•ãªã—ï¼‰ */
@keyframes rarity4Shimmer {
    0%, 100% {
        opacity: 0.3;
    }
    25% {
        opacity: 0.9;
    }
    50% {
        opacity: 0.5;
    }
    75% {
        opacity: 1;
    }
}

/* ========================================
   â˜…5 - ãƒ¬ã‚¸ã‚§ãƒ³ãƒ‰ï¼ˆæ¸¦å·»ãé­”æ³•é™£ã®ç‚ï¼‰
   @propertyã§conic-gradientã®è§’åº¦ã ã‘å›è»¢ï¼ˆæ ã¯å›ºå®šï¼‰
   ======================================== */

/* CSSå¤‰æ•°ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®šç¾© */
@property --r5-angle {
    syntax: '<angle>';
    initial-value: 0deg;
    inherits: false;
}

.skill-frame-card.rarity-5 { 
    --frame-color: #e74c3c;
    --r5-angle: 0deg;
}
.skill-frame-card.rarity-5 .skill-name { 
    color: #fff; 
    text-shadow: 0 0 8px #ff0000, 0 0 16px #ff4500, 0 0 24px #8b0000;
    animation: nameFlicker 0.1s ease-in-out infinite alternate;
}

/* æ”»æ’ƒãƒ»é˜²å¾¡ç³» - å¤–å´ã®èµ¤ã„å…‰ï¼ˆbox-shadowï¼‰ */
.skill-frame-card.rarity-5.cat-attack,
.skill-frame-card.rarity-5.cat-defense {
    animation: rarity5BoxGlow 0.8s ease-in-out infinite;
}

/* æ”»æ’ƒãƒ»é˜²å¾¡ç³»ã®èƒŒæ™¯ - æ¸¦å·»ãï¼ˆæ ã¯å›ºå®šã€ã‚°ãƒ©ãƒ‡è§’åº¦ã ã‘å›è»¢ï¼‰ */
.skill-frame-card.rarity-5.cat-attack::before,
.skill-frame-card.rarity-5.cat-defense::before {
    background: conic-gradient(
        from var(--r5-angle),
        #2d0000 0deg,
        #8b0000 22deg,
        #dc143c 45deg,
        #ff0000 67deg,
        #ff4500 90deg,
        #dc143c 112deg,
        #8b0000 135deg,
        #2d0000 157deg,
        #4a0000 180deg,
        #b22222 202deg,
        #ff0000 225deg,
        #ff6347 247deg,
        #ff4500 270deg,
        #ff0000 292deg,
        #b22222 315deg,
        #4a0000 337deg,
        #2d0000 360deg
    );
    animation: rarity5Swirl 3s linear infinite, rarity5Pulse 0.8s ease-in-out infinite;
}

/* åŠ¹æœç³»ã®èƒŒæ™¯ - æ¸¦å·»ãï¼ˆä¸¸ãƒ»å››è§’ã¨åŒã˜ã::beforeï¼‰ */
/* å…«è§’å½¢â˜…5 - è¦ªè¦ç´ ã«drop-shadowã‚’é©ç”¨ */
.skill-frame-card.rarity-5.cat-effect {
    animation: rarity5EffectGlow 0.8s ease-in-out infinite;
}

@keyframes rarity5EffectGlow {
    0%, 100% { 
        filter: drop-shadow(0 0 15px rgba(231, 76, 60, 0.7)) drop-shadow(0 0 30px rgba(192, 57, 43, 0.5));
    }
    50% { 
        filter: drop-shadow(0 0 25px rgba(231, 76, 60, 1)) drop-shadow(0 0 50px rgba(192, 57, 43, 0.7)) drop-shadow(0 0 70px rgba(255, 100, 100, 0.4));
    }
}

.skill-frame-card.rarity-5.cat-effect::after {
    background: conic-gradient(
        from var(--r5-angle),
        #2d0000 0deg,
        #8b0000 22deg,
        #dc143c 45deg,
        #ff0000 67deg,
        #ff4500 90deg,
        #dc143c 112deg,
        #8b0000 135deg,
        #2d0000 157deg,
        #4a0000 180deg,
        #b22222 202deg,
        #ff0000 225deg,
        #ff6347 247deg,
        #ff4500 270deg,
        #ff0000 292deg,
        #b22222 315deg,
        #4a0000 337deg,
        #2d0000 360deg
    );
    animation: rarity5Swirl 3s linear infinite, rarity5Pulse 0.8s ease-in-out infinite;
}

/* åå‰ã®ã¡ã‚‰ã¤ã */
@keyframes nameFlicker {
    0% { opacity: 1; }
    100% { opacity: 0.85; }
}

/* æ¸¦å·»ãå›è»¢ï¼ˆCSSå¤‰æ•°ã®è§’åº¦ã ã‘å›è»¢ã€æ ã¯å›ºå®šï¼ï¼‰ */
@keyframes rarity5Swirl {
    to { 
        --r5-angle: 360deg;
    }
}

/* æ¿€ã—ã„æ˜æš—ã®è„ˆå‹• */
@keyframes rarity5Pulse {
    0%, 100% { filter: brightness(1) saturate(1.2); }
    50% { filter: brightness(1.5) saturate(1.5); }
}

/* ä¸¸ãƒ»å››è§’ã®å¤–å´ã®èµ¤ã„å…‰ï¼ˆbox-shadowï¼‰ */
@keyframes rarity5BoxGlow {
    0%, 100% { box-shadow: 0 0 25px rgba(231, 76, 60, 0.7), 0 0 50px rgba(192, 57, 43, 0.5); }
    50% { box-shadow: 0 0 45px rgba(231, 76, 60, 1), 0 0 80px rgba(192, 57, 43, 0.7), 0 0 100px rgba(255, 100, 100, 0.4); }
}

/* â˜…5 ç«ã®ç²‰ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ - æ˜ã‚‹ã„ç²’å­ã¨æš—ã„ç²’å­ */
.skill-frame-card.rarity-5 .particles {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 6;
    overflow: hidden;
    border-radius: inherit;
    clip-path: inherit;
}

/* æ˜ã‚‹ã„ç²’å­ï¼ˆæ™‚è¨ˆå›ã‚Šã§æ¼‚ã†ï¼‰ - é»„è‰²ã€œã‚ªãƒ¬ãƒ³ã‚¸ */
.skill-frame-card.rarity-5 .particles::before {
    content: '';
    position: absolute;
    width: 150%;
    height: 150%;
    top: -25%;
    left: -25%;
    background-image: 
        radial-gradient(3px 3px at 30% 30%, #ffd700 0%, transparent 100%),
        radial-gradient(2.5px 2.5px at 50% 20%, #ffaa00 0%, transparent 100%),
        radial-gradient(2px 2px at 70% 40%, #ffd700 0%, transparent 100%),
        radial-gradient(3px 3px at 20% 60%, #ffcc00 0%, transparent 100%),
        radial-gradient(2.5px 2.5px at 80% 50%, #ffd700 0%, transparent 100%),
        radial-gradient(2px 2px at 40% 70%, #ffaa00 0%, transparent 100%),
        radial-gradient(3px 3px at 60% 80%, #ffd700 0%, transparent 100%),
        radial-gradient(2.5px 2.5px at 35% 45%, #ffcc00 0%, transparent 100%);
    animation: brightParticles 5s linear infinite;
}

/* æš—ã„ç²’å­ï¼ˆåæ™‚è¨ˆå›ã‚Šã§æ¼‚ã†ï¼‰ - æ·±ã„èµ¤ã€œæš—èµ¤ */
.skill-frame-card.rarity-5 .particles::after {
    content: '';
    position: absolute;
    width: 150%;
    height: 150%;
    top: -25%;
    left: -25%;
    background-image: 
        radial-gradient(4px 4px at 25% 35%, #8b0000 0%, transparent 100%),
        radial-gradient(3px 3px at 55% 25%, #4a0000 0%, transparent 100%),
        radial-gradient(3.5px 3.5px at 75% 45%, #8b0000 0%, transparent 100%),
        radial-gradient(3px 3px at 35% 65%, #2d0000 0%, transparent 100%),
        radial-gradient(4px 4px at 65% 55%, #4a0000 0%, transparent 100%),
        radial-gradient(3px 3px at 45% 75%, #8b0000 0%, transparent 100%),
        radial-gradient(3.5px 3.5px at 20% 50%, #2d0000 0%, transparent 100%),
        radial-gradient(3px 3px at 80% 70%, #4a0000 0%, transparent 100%);
    animation: darkParticles 6s linear infinite reverse;
}

/* æ˜ã‚‹ã„ç²’å­ - æ™‚è¨ˆå›ã‚Š */
@keyframes brightParticles {
    from { transform: rotate(0deg); opacity: 0.9; }
    50% { opacity: 1; }
    to { transform: rotate(360deg); opacity: 0.9; }
}

/* æš—ã„ç²’å­ - åæ™‚è¨ˆå›ã‚Š */
@keyframes darkParticles {
    from { transform: rotate(0deg); opacity: 0.7; }
    50% { opacity: 0.9; }
    to { transform: rotate(360deg); opacity: 0.7; }
}

/* ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã®æ˜æ»… */

@keyframes rarity5BgMove {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}


.empty-message {
    grid-column: 1 / -1;
    text-align: center;
    padding: 40px;
    color: var(--text-secondary);
    font-size: 0.85rem;
    line-height: 1.6;
}

/* ========================================
   ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ç”»é¢ï¼ˆæ–°ä»•æ§˜ï¼‰
   ======================================== */
.current-skin-section {
    margin-bottom: 25px;
}

.equipped-tiles-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 6px;
}

.equipped-tile-item {
    background: var(--bg-card);
    border-radius: 8px;
    padding: 8px 4px;
    text-align: center;
}

.eq-tile-value {
    font-family: 'Orbitron', sans-serif;
    font-size: 0.8rem;
    font-weight: 700;
    color: var(--accent-cyan);
}

.eq-tile-skin {
    font-size: 0.5rem;
    color: var(--text-secondary);
    margin-top: 2px;
}

.tile-collection-section {
    margin-bottom: 20px;
}

.collection-hint {
    font-size: 0.7rem;
    color: var(--text-secondary);
    text-align: center;
    margin-bottom: 12px;
}

.tile-collection {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.skin-group {
    background: var(--bg-card);
    border-radius: 12px;
    padding: 12px;
}

.skin-group-header {
    font-weight: 700;
    font-size: 0.85rem;
    margin-bottom: 10px;
    color: var(--accent-yellow);
}

.tiles-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 8px;
}

.tile-card {
    background: var(--bg-secondary);
    border-radius: 8px;
    padding: 8px;
    text-align: center;
    cursor: pointer;
    border: 2px solid transparent;
    transition: all 0.2s ease;
    position: relative;
}

.tile-card:hover {
    border-color: var(--accent-cyan);
}

.tile-card.equipped {
    border-color: var(--accent-green);
}

.tc-value {
    font-family: 'Orbitron', sans-serif;
    font-size: 0.9rem;
    font-weight: 700;
    color: var(--text-primary);
}

.tc-count {
    font-size: 0.6rem;
    color: var(--text-secondary);
}

.tc-merge {
    position: absolute;
    top: -5px;
    right: -5px;
    background: var(--accent-pink);
    color: white;
    font-size: 0.5rem;
    padding: 2px 4px;
    border-radius: 6px;
}

.tc-equipped {
    position: absolute;
    bottom: -5px;
    left: 50%;
    transform: translateX(-50%);
    background: var(--accent-green);
    color: white;
    font-size: 0.45rem;
    padding: 1px 4px;
    border-radius: 4px;
    white-space: nowrap;
}

/* ã‚¯ã‚¤ãƒƒã‚¯ãƒ¢ãƒ¼ãƒ€ãƒ« */
.quick-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: var(--z-modal-top);
}

.quick-modal-content {
    background: var(--bg-secondary);
    border-radius: 16px;
    padding: 20px;
    min-width: 260px;
    text-align: center;
}

.quick-modal-content h3 {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.1rem;
    margin-bottom: 10px;
    color: var(--accent-cyan);
}

.quick-modal-content p {
    font-size: 0.85rem;
    color: var(--text-secondary);
    margin-bottom: 15px;
}

.quick-actions {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-bottom: 15px;
}

.quick-actions .action-btn {
    width: 100%;
    padding: 10px;
    border: none;
    border-radius: 8px;
    font-weight: 700;
    cursor: pointer;
}

.quick-actions .action-btn.merge {
    background: var(--accent-pink);
    color: white;
}

.quick-actions .action-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* ========================================
   ãƒ¢ãƒ¼ãƒ€ãƒ«
   ======================================== */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: var(--z-modal);
}

.modal.active {
    display: flex;
}

.modal-content {
    background: var(--bg-secondary);
    border-radius: 16px;
    padding: 25px;
    max-width: 90%;
    max-height: 80%;
    overflow-y: auto;
}

.modal-title {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.3rem;
    text-align: center;
    margin-bottom: 20px;
    color: var(--accent-cyan);
}

.modal-close-btn {
    width: 100%;
    padding: 12px;
    background: var(--bg-card);
    border: 2px solid var(--accent-cyan);
    border-radius: 10px;
    color: var(--text-primary);
    font-weight: 700;
    cursor: pointer;
    margin-top: 15px;
}

/* ã‚¬ãƒãƒ£çµæœãƒ¢ãƒ¼ãƒ€ãƒ« */
.gacha-results {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    margin-bottom: 15px;
}

.gacha-result-item {
    background: var(--bg-card);
    border-radius: 10px;
    padding: 15px 10px;
    text-align: center;
}

.gacha-result-item .item-icon {
    font-size: 2rem;
    margin-bottom: 5px;
}

.gacha-result-item .item-icon img {
    width: 48px;
    height: 48px;
    object-fit: contain;
}

.gacha-result-item .item-name {
    font-size: 0.7rem;
    color: var(--text-secondary);
}

.gacha-result-item .item-rarity {
    font-size: 0.6rem;
    color: var(--accent-yellow);
}

.gacha-result-item.rarity-5 { border: 2px solid var(--accent-yellow); animation: rarity5Glow 1s ease infinite; }
.gacha-result-item.rarity-4 { border: 2px solid var(--accent-purple); }

@keyframes rarity5Glow {
    0%, 100% { box-shadow: 0 0 10px var(--accent-yellow); }
    50% { box-shadow: 0 0 25px var(--accent-yellow); }
}

/* ========================================
   ã‚¬ãƒãƒ£æ¼”å‡ºç”»é¢
   ======================================== */
#gacha-animation-screen {
    background: radial-gradient(ellipse at center, #e8f4fd 0%, #f0f2f5 100%);
}

.gacha-animation-container {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.gacha-orbs {
    position: relative;
    width: 200px;
    height: 200px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.gacha-orb {
    position: absolute;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    animation: orbSpin 1.5s ease-in-out infinite;
}

.gacha-orb:nth-child(1) { animation-delay: 0s; background: var(--accent-cyan); }
.gacha-orb:nth-child(2) { animation-delay: 0.2s; background: var(--accent-pink); }
.gacha-orb:nth-child(3) { animation-delay: 0.4s; background: var(--accent-yellow); }
.gacha-orb:nth-child(4) { animation-delay: 0.6s; background: var(--accent-green); }
.gacha-orb:nth-child(5) { animation-delay: 0.8s; background: var(--accent-purple); }

@keyframes orbSpin {
    0% { transform: rotate(0deg) translateX(60px) rotate(0deg) scale(1); opacity: 1; }
    50% { transform: rotate(180deg) translateX(60px) rotate(-180deg) scale(1.3); opacity: 0.8; }
    100% { transform: rotate(360deg) translateX(60px) rotate(-360deg) scale(1); opacity: 1; }
}

.gacha-text {
    margin-top: 40px;
    font-family: 'Orbitron', sans-serif;
    font-size: 1.2rem;
    color: var(--accent-cyan);
    animation: textPulse 0.8s ease infinite alternate;
}

@keyframes textPulse {
    0% { opacity: 0.6; }
    100% { opacity: 1; }
}

/* ========================================
   ã‚¬ãƒãƒ£çµæœç”»é¢
   ======================================== */
#gacha-result-screen {
    background: linear-gradient(180deg, #f8f9fa 0%, #e8edf2 50%, #f8f9fa 100%);
}

.gacha-result-container {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    padding: 20px;
    box-sizing: border-box;
}

.result-title {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.5rem;
    text-align: center;
    color: var(--accent-yellow);
    margin-bottom: 15px;
    text-shadow: 0 0 20px var(--accent-yellow);
}

.gacha-result-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
    flex: 1;
    overflow-y: auto;
    padding: 15px 10px;
    background: rgba(0, 0, 0, 0.05);
    border-radius: 12px;
    margin-bottom: 10px;
    justify-items: center;
    align-content: start;
}

/* ã‚¬ãƒãƒ£çµæœå†…ã®ã‚¹ã‚­ãƒ«ã‚«ãƒ¼ãƒ‰èª¿æ•´ */
.gacha-result-grid .skill-frame-card.gacha-item {
    width: 90px;
    height: 100px;
}

.gacha-result-grid .skill-frame-card.gacha-item .frame-inner {
    z-index: 10;
}

/* NEWãƒãƒƒã‚¸ */
.skill-frame-card .new-badge {
    position: absolute;
    top: 0;
    right: 0;
    background: var(--accent-red);
    color: white;
    font-size: 0.5rem;
    font-weight: 700;
    padding: 2px 5px;
    border-radius: 0 0 0 8px;
    z-index: 25;
}

/* ã‚¬ãƒãƒ£ãƒ’ãƒ³ãƒˆ */
.gacha-hint {
    text-align: center;
    color: var(--text-secondary);
    font-size: 0.8rem;
    margin-bottom: 10px;
}

.gacha-result-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 8px;
    background: var(--bg-card);
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s ease;
    border: 2px solid transparent;
}

.gacha-result-card:hover,
.gacha-result-card.selected {
    border-color: var(--accent-cyan);
    transform: scale(1.05);
}

.gacha-result-card .card-icon {
    width: 50px;
    height: 50px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    margin-bottom: 5px;
}

.gacha-result-card .card-name {
    font-size: 0.6rem;
    text-align: center;
    color: var(--text-primary);
}

.gacha-result-card .card-rarity {
    font-size: 0.5rem;
    color: var(--accent-yellow);
}

/* ãƒ¬ã‚¢ãƒªãƒ†ã‚£åˆ¥ãƒœãƒ¼ãƒ€ãƒ¼ */
.gacha-result-card.rarity-5 { 
    border-color: var(--sk-rarity-5); 
    box-shadow: 0 0 15px rgba(244, 114, 182, 0.5);
    animation: cardGlow5 1s ease infinite alternate;
}
.gacha-result-card.rarity-4 { 
    border-color: var(--sk-rarity-4); 
    box-shadow: 0 0 10px rgba(251, 191, 36, 0.4);
}
.gacha-result-card.rarity-3 { border-color: var(--sk-rarity-3); }
.gacha-result-card.rarity-2 { border-color: var(--sk-rarity-2); }

@keyframes cardGlow5 {
    0% { box-shadow: 0 0 10px rgba(244, 114, 182, 0.4); }
    100% { box-shadow: 0 0 25px rgba(244, 114, 182, 0.7); }
}


/* OKãƒœã‚¿ãƒ³ */
.gacha-ok-btn {
    width: 100%;
    padding: 15px;
    font-family: 'Orbitron', sans-serif;
    font-size: 1.1rem;
    font-weight: 700;
    background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
    color: white;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.gacha-ok-btn:hover {
    transform: scale(1.02);
    box-shadow: 0 0 20px rgba(0, 245, 255, 0.5);
}

/* ========================================
   ã‚¹ã‚­ãƒ«è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆã‚µã‚¤ã‚ºçµ±ä¸€ï¼‰
   ======================================== */
.skill-detail {
    width: 300px;
    min-height: 280px;
}

.skill-detail-header {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 15px;
}

.skill-detail-header .skill-icon {
    width: 70px;
    height: 70px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}


.skill-category {
    font-weight: 700;
}

.skill-detail-info h3 {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.1rem;
    margin-bottom: 5px;
}

.skill-meta {
    display: flex;
    gap: 10px;
    font-size: 0.8rem;
}

.skill-rarity {
    color: var(--accent-yellow);
}

.skill-cost {
    color: var(--accent-cyan);
}

.skill-description {
    background: var(--bg-card);
    padding: 12px;
    border-radius: 8px;
    font-size: 0.85rem;
    color: var(--text-secondary);
    margin-bottom: 15px;
    min-height: 60px;
}

.skill-detail-actions {
    display: flex;
    gap: 10px;
}

.action-btn {
    flex: 1;
    padding: 10px;
    border: none;
    border-radius: 8px;
    font-size: 0.8rem;
    font-weight: 700;
    cursor: pointer;
}

.action-btn.equip {
    background: var(--accent-cyan);
    color: var(--bg-primary);
}

.action-btn.upgrade {
    background: var(--accent-purple);
    color: white;
}

.action-btn.sell {
    background: var(--bg-card);
    color: var(--accent-red);
    border: 1px solid var(--accent-red);
}

/* ========================================
   ç”»é¢ç®¡ç†ï¼ˆã‚²ãƒ¼ãƒ ç”»é¢ãƒ»çµæœç”»é¢ï¼‰
   ======================================== */
.screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: none;
    opacity: 0;
    transition: opacity 0.3s ease;
    overflow: hidden;
    z-index: var(--z-screen);
}

.screen.active {
    display: flex;
    opacity: 1;
}

/* ========================================
   ã‚²ãƒ¼ãƒ ç”»é¢
   ======================================== */
#game-screen {
    touch-action: none;
    background: var(--bg-primary);
}

.game-container {
    width: 100%;
    height: calc(var(--vh, 1vh) * 100);
    max-width: 500px;
    margin: 0 auto;
    padding: 8px;
    display: flex;
    flex-direction: column;
    gap: 4px;
    position: relative;
}

.game-layout {
    height: 100%;
    display: grid;
    /* hud-area / enemy-area / battle-log / equipped-skills / player-area */
    grid-template-rows: auto 28fr auto auto 62fr;
    gap: 4px;
}

.hud-area {
    display: flex;
    flex-direction: column;
    gap: 4px;
    justify-content: center;
}

.enemy-area,
.player-area {
    display: flex;
    align-items: center;
    justify-content: center;
}

.board-wrapper {
    position: relative;
}

.enemy-area .game-board {
    width: min(68vw, 210px);
    height: min(68vw, 210px);
    border: 2px solid var(--accent-red);
    transition: box-shadow 0.3s ease, border-color 0.3s ease;
}

.player-area .game-board {
    width: min(88vw, 340px);
    height: min(88vw, 340px);
    border: 2px solid transparent;
    transition: box-shadow 0.3s ease, border-color 0.3s ease;
}

.game-board.match-point {
    animation: matchPointGlow 0.8s ease infinite alternate;
}

.enemy-area .game-board.match-point {
    border-color: var(--accent-cyan);
}

.player-area .game-board.match-point {
    border-color: var(--accent-red);
}

@keyframes matchPointGlow {
    0% { box-shadow: 0 0 10px currentColor, inset 0 0 10px rgba(255, 255, 255, 0.1); }
    100% { box-shadow: 0 0 30px currentColor, 0 0 60px currentColor, inset 0 0 20px rgba(255, 255, 255, 0.2); }
}

.freeze-overlay {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 200, 255, 0.3);
    border-radius: 10px;
    display: none;
    align-items: center;
    justify-content: center;
    font-size: 3rem;
    z-index: var(--z-freeze);
}

.frozen .freeze-overlay {
    display: flex;
    animation: freezePulse 1s ease infinite;
}

.frozen .game-board {
    filter: brightness(0.7);
}

@keyframes freezePulse {
    0%, 100% { opacity: 0.8; }
    50% { opacity: 1; }
}

.battle-log-area {
    display: flex;
    align-items: center;
    justify-content: center;
    width: min(88vw, 340px);  /* ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒœãƒ¼ãƒ‰ã¨åŒã˜å¹… */
    margin: 4px auto;
    padding: 8px 12px;
    background: transparent;
    border: 2px solid var(--accent-cyan);
    border-radius: 8px;
    flex-shrink: 0;
}

/* è£…å‚™ã‚¹ã‚­ãƒ«è¡¨ç¤ºãƒãƒ¼ï¼ˆãƒãƒˆãƒ«ä¸­ï¼‰ */
.equipped-skills-bar {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    height: 80px;
    min-height: 80px;
    max-height: 80px;
    padding: 0 10px;
    flex-shrink: 0;
}

/* ãƒãƒˆãƒ«ç”»é¢ç”¨skill-frame-cardã‚µã‚¤ã‚º */
.skill-frame-card.battle-size {
    width: 65px;
    height: 70px;
    flex-shrink: 0;
}
.skill-frame-card.battle-size .frame-inner {
    width: 100%;
    height: 100%;
}
.skill-frame-card.battle-size .skill-icon-img {
    width: 32px;
    height: 32px;
}
.skill-frame-card.battle-size .skill-name {
    display: none; /* ãƒãƒˆãƒ«ç”»é¢ã§ã¯åå‰éè¡¨ç¤º */
}
/* ãƒãƒˆãƒ«ç”¨ã®å„ã‚«ãƒ†ã‚´ãƒªå½¢çŠ¶ã‚µã‚¤ã‚ºèª¿æ•´ */
.skill-frame-card.battle-size.cat-attack::before {
    width: 60px;
    height: 60px;
}
.skill-frame-card.battle-size.cat-defense::before {
    width: 56px;
    height: 62px;
}
.skill-frame-card.battle-size.cat-effect::before {
    width: 60px;
    height: 63px;
}
.skill-frame-card.battle-size.cat-effect::after {
    width: 56px;
    height: 59px;
}

/* ã‚¹ã‚­ãƒ«è©³ç´°ç”¨ã‚µã‚¤ã‚º */
.skill-frame-card.detail-size {
    width: 90px;
    height: 100px;
    flex-shrink: 0;
}
.skill-frame-card.detail-size .frame-inner {
    width: 100%;
    height: 100%;
}
.skill-frame-card.detail-size .skill-icon-img {
    width: 48px;
    height: 48px;
}
.skill-frame-card.detail-size .skill-name {
    display: none;
}
.skill-frame-card.detail-size.cat-attack::before {
    width: 85px;
    height: 85px;
}
.skill-frame-card.detail-size.cat-defense::before {
    width: 80px;
    height: 90px;
}
.skill-frame-card.detail-size.cat-effect::before {
    width: 85px;
    height: 90px;
}
.skill-frame-card.detail-size.cat-effect::after {
    width: 80px;
    height: 85px;
}

.equipped-skill-icon {
    width: 70px;
    height: 70px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
}

.equipped-skill-icon img {
    width: 45px;
    height: 45px;
    object-fit: contain;
    position: relative;
    z-index: 2;
}

/* ã‚«ãƒ†ã‚´ãƒªåˆ¥æ è‰²ï¼ˆæ”»æ’ƒ=èµ¤ã€é˜²å¾¡=ç·‘ã€åŠ¹æœ=é’ï¼‰ */
.equipped-skill-icon.cat-attack {
    border: 2px solid #ff3366;
}
.equipped-skill-icon.cat-defense {
    border: 2px solid #22c55e;
}
.equipped-skill-icon.cat-effect {
    border: 2px solid #3b82f6;
}

/* ãƒ¬ã‚¢ãƒªãƒ†ã‚£åˆ¥èƒŒæ™¯æ¼”å‡º */
.equipped-skill-icon.rarity-1 {
    background: linear-gradient(145deg, #9ca3af, #6b7280);
}
.equipped-skill-icon.rarity-2 {
    background: linear-gradient(145deg, #3dd9a0, #28b882);
    box-shadow: 0 0 8px rgba(52, 211, 153, 0.5);
}
.equipped-skill-icon.rarity-3 {
    background: linear-gradient(145deg, #60a5fa, #3b82f6);
    box-shadow: 0 0 10px rgba(59, 130, 246, 0.6);
}
.equipped-skill-icon.rarity-4 {
    background: linear-gradient(0deg, #b8860b, #f1c40f, #ffd700);
    box-shadow: 0 0 12px rgba(241, 196, 15, 0.7);
    animation: rarity4Pulse 1.5s ease-in-out infinite;
}
.equipped-skill-icon.rarity-5 {
    background: linear-gradient(145deg, #f472b6, #ec4899);
    box-shadow: 0 0 15px rgba(236, 72, 153, 0.8);
    animation: rarity5Glow 2s ease-in-out infinite;
}

/* ãƒ¬ã‚¢ãƒªãƒ†ã‚£åˆ¥å…‰ã‚Š */
.equipped-skill-icon.rarity-3 { box-shadow: 0 0 6px rgba(96, 165, 250, 0.6); }
.equipped-skill-icon.rarity-4 { box-shadow: 0 0 8px rgba(251, 191, 36, 0.8); }
.equipped-skill-icon.rarity-5 { box-shadow: 0 0 10px rgba(244, 114, 182, 0.9); }

.battle-log {
    font-family: 'Orbitron', sans-serif;
    font-size: 0.85rem;
    font-weight: 700;
    color: var(--text-primary);
    text-align: center;
    animation: logPulse 0.3s ease;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
}

.battle-log.attack { color: var(--accent-red); text-shadow: 0 0 15px var(--accent-red); }
.battle-log.interference { color: var(--accent-pink); text-shadow: 0 0 15px var(--accent-pink); }
.battle-log.damage { color: var(--accent-cyan); text-shadow: 0 0 15px var(--accent-cyan); }
.battle-log.stuck { color: #ff8800; text-shadow: 0 0 15px #ff8800; }

.battle-log .log-skill-icon {
    width: 22px;
    height: 22px;
    vertical-align: middle;
    margin-right: 4px;
    filter: drop-shadow(0 0 4px currentColor);
}

@keyframes logPulse {
    0% { transform: scale(1.2); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
}

.game-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    padding: 0 5px;
}

.player-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.player-info.player-enemy {
    align-items: flex-end;
}

.hp-bar {
    width: 100%;
    height: 18px;
    background: var(--bg-card);
    border-radius: 9px;
    position: relative;
    overflow: hidden;
    border: 2px solid var(--accent-green);
}

.hp-bar.enemy {
    border-color: var(--accent-red);
}

.hp-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent-green), #00cc66);
    border-radius: 7px;
    transition: width 0.3s ease;
    width: 100%;
}

.hp-bar.enemy .hp-fill {
    background: linear-gradient(90deg, var(--accent-red), #cc0033);
}

.hp-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-family: 'Orbitron', sans-serif;
    font-size: 0.7rem;
    font-weight: 700;
    color: white;
    text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
}

/* ãƒãƒ•/ãƒ‡ãƒãƒ•ã‚¢ã‚¤ã‚³ãƒ³ */
.buff-icons {
    display: flex;
    gap: 4px;
    justify-content: center;
    align-items: center;
    min-height: 20px;
    margin-top: 2px;
    flex-wrap: wrap;
}

.buff-icon {
    width: 18px;
    height: 18px;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    animation: buffPulse 2s ease-in-out infinite;
}

.buff-icon img {
    width: 14px;
    height: 14px;
    object-fit: contain;
}

/* ãƒãƒ•ã‚¢ã‚¤ã‚³ãƒ³ - ã‚«ãƒ†ã‚´ãƒªåˆ¥æ è‰²ï¼ˆæ”»æ’ƒ=èµ¤ã€é˜²å¾¡=ç·‘ã€åŠ¹æœ=é’ï¼‰ */
.buff-icon.cat-attack {
    border: 1px solid #ff3366;
}
.buff-icon.cat-defense {
    border: 1px solid #22c55e;
}
.buff-icon.cat-effect {
    border: 1px solid #3b82f6;
}

/* ãƒãƒ•ã‚¢ã‚¤ã‚³ãƒ³ - ãƒ¬ã‚¢ãƒªãƒ†ã‚£åˆ¥èƒŒæ™¯ */
.buff-icon.rarity-1 { background: rgba(156, 163, 175, 0.4); }
.buff-icon.rarity-2 { background: rgba(52, 211, 153, 0.4); box-shadow: 0 0 4px rgba(52, 211, 153, 0.5); }
.buff-icon.rarity-3 { background: rgba(59, 130, 246, 0.4); box-shadow: 0 0 5px rgba(59, 130, 246, 0.5); }
.buff-icon.rarity-4 { background: rgba(241, 196, 15, 0.5); box-shadow: 0 0 8px rgba(241, 196, 15, 0.7); }
.buff-icon.rarity-5 { background: rgba(236, 72, 153, 0.4); box-shadow: 0 0 8px rgba(236, 72, 153, 0.7); }

/* ãƒãƒ•/ãƒ‡ãƒãƒ•åŒºåˆ¥ï¼ˆã‚¢ã‚¤ã‚³ãƒ³è‡ªä½“ã¯åŒã˜ã€åŠ¹æœã®æœ‰åˆ©ä¸åˆ©ã§åˆ¤æ–­ï¼‰ */
.buff-icon.buff { opacity: 1; }
.buff-icon.debuff { opacity: 0.8; }

/* æ™‚é–“åˆ¶é™ä»˜ãã¯æ®‹ã‚Šæ™‚é–“è¡¨ç¤º */
.buff-icon .buff-timer {
    position: absolute;
    bottom: -2px;
    right: -2px;
    font-size: 0.5rem;
    font-weight: bold;
    color: white;
    background: rgba(0, 0, 0, 0.7);
    padding: 0 2px;
    border-radius: 2px;
    line-height: 1;
}

@keyframes buffPulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

.score {
    font-family: 'Orbitron', sans-serif;
    font-size: 0.75rem;
    color: var(--text-secondary);
}

.vs-badge {
    font-family: 'Orbitron', sans-serif;
    font-size: 0.8rem;
    font-weight: 900;
    color: var(--accent-yellow);
    padding: 4px 6px;
}

.cpu-level {
    font-size: 0.65rem;
    color: var(--text-secondary);
}

.warning-bar {
    background: rgba(255, 51, 102, 0.2);
    border: 1px solid var(--accent-red);
    border-radius: 6px;
    padding: 4px 8px;
    display: flex;
    align-items: center;
    gap: 6px;
    opacity: 0;
    transform: translateY(-10px);
    transition: all 0.3s ease;
    min-height: 28px;
}

.warning-bar.active {
    opacity: 1;
    transform: translateY(0);
}

.warning-icon {
    font-size: 0.9rem;
    animation: shake 0.5s ease infinite;
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-2px); }
    75% { transform: translateX(2px); }
}

.warning-text {
    font-size: 0.7rem;
    color: var(--accent-red);
}

.warning-queue {
    margin-left: auto;
    display: flex;
    gap: 3px;
}

.warning-dot {
    width: 6px;
    height: 6px;
    background: var(--accent-red);
    border-radius: 50%;
}

.game-board {
    background: #e6e6e6;
    border-radius: 10px;
    padding: 8px;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-template-rows: repeat(4, 1fr);
    gap: 6px;
    position: relative;
    overflow: hidden;
}

/* 16ãƒã‚¹èƒŒæ™¯ã‚»ãƒ« */
.tile-cell {
    background: #cfcfcf;
    border-radius: 5px;
}

.board-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(100, 200, 255, 0.7);
    border-radius: 10px;
    display: none;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
    font-weight: 700;
    color: var(--accent-red);
    text-align: center;
    padding: 15px;
}

.board-overlay.active {
    display: flex;
    animation: overlayPop 0.3s ease;
}

@keyframes overlayPop {
    0% { opacity: 0; transform: scale(0.9); }
    100% { opacity: 1; transform: scale(1); }
}

/* ========================================
   ğŸ® ã‚²ãƒ¼ãƒ ã‚¿ã‚¤ãƒ«ï¼ˆã‚¹ã‚­ãƒ«ã¨ã¯å®Œå…¨åˆ†é›¢ï¼‰
   ======================================== */
.tile {
    position: absolute;
    border-radius: 5px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Orbitron', sans-serif;
    font-weight: 700;
    transition: left 0.1s ease, top 0.1s ease;
    z-index: var(--z-tile);
    /* ã‚¿ã‚¤ãƒ«å†…éƒ¨ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ¶å¾¡ */
    isolation: isolate;
}

.player-area .tile { font-size: 1.3rem; }
.enemy-area .tile { font-size: 0.7rem; }

.tile[data-value="2"] { background: var(--tile-2); color: var(--text-primary); }
.tile[data-value="4"] { background: var(--tile-4); color: var(--text-primary); }
.tile[data-value="8"] { background: var(--tile-8); color: white; }
.tile[data-value="16"] { background: var(--tile-16); color: white; }
.tile[data-value="32"] { background: var(--tile-32); color: white; }
.tile[data-value="64"] { background: var(--tile-64); color: white; }

.enemy-area .tile[data-value="2"].interference-tile {
    background: #4a1a1a;
    box-shadow: 0 0 12px var(--accent-red);
    animation: interferenceGlow 0.8s ease infinite alternate;
}

@keyframes interferenceGlow {
    0% { box-shadow: 0 0 8px var(--accent-red); }
    100% { box-shadow: 0 0 20px var(--accent-red), 0 0 30px rgba(255, 51, 102, 0.5); }
}

.tile.bomb-tile {
    background: #4a1a3a !important;
    box-shadow: 0 0 15px var(--accent-pink) !important;
    animation: bombPulse 0.5s ease infinite !important;
}

.tile.bomb-tile::after {
    content: 'ğŸ’£';
    position: absolute;
    top: -5px;
    right: -5px;
    font-size: 0.6rem;
}

@keyframes bombPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.08); }
}

.tile[data-value="128"] { 
    background: var(--tile-128); 
    color: white;
    box-shadow: 0 0 10px var(--tile-128);
    animation: attackable 1s ease infinite;
}

.tile[data-value="256"] { 
    background: var(--tile-256); 
    color: white;
    box-shadow: 0 0 12px var(--tile-256);
}

.tile[data-value="512"] { 
    background: var(--tile-512); 
    color: white;
    box-shadow: 0 0 15px var(--tile-512);
    animation: attackable 1s ease infinite;
}

.tile[data-value="1024"] { 
    background: var(--tile-1024); 
    color: white;
    box-shadow: 0 0 20px var(--tile-1024);
    animation: attackable 0.7s ease infinite;
}

.tile[data-value="2048"] { 
    background: var(--tile-2048); 
    color: var(--accent-yellow);
    box-shadow: 0 0 25px var(--accent-yellow);
}

@keyframes attackable {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.03); }
}

.tile.new { animation: pop 0.15s ease; }

@keyframes pop {
    0% { transform: scale(0); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
}

.tile.merged { animation: merge 0.15s ease; }

@keyframes merge {
    0% { transform: scale(1); }
    50% { transform: scale(1.12); }
    100% { transform: scale(1); }
}

.tile.attack-target { cursor: pointer; }

/* ========================================
   ã‚¹ã‚­ãƒ«ã‚¢ã‚¤ã‚³ãƒ³å…±é€š
   ======================================== */

/* ãƒãƒˆãƒ«ä¸­ã®ã‚¿ã‚¤ãƒ«ä¸Šã‚¹ã‚­ãƒ«ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ */
.tile.has-skill {
    /* è¦ªã¨ã—ã¦æ©Ÿèƒ½ */
}

/* ========================================
   ã‚¿ã‚¤ãƒ«ä¸Šã‚¹ã‚­ãƒ«ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ï¼ˆãƒãƒˆãƒ«ä¸­ï¼‰
   ã‚¿ã‚¤ãƒ«å…¨é¢ã‚’è¦†ã†åŠé€æ˜ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤
   æ•°å­—ã¯è¦‹ãˆã‚‹ã‚ˆã†ã«èª¿æ•´
   ======================================== */
/* ã‚¿ã‚¤ãƒ«ä¸Šã‚¹ã‚­ãƒ«ãƒãƒƒã‚¸ï¼ˆå³ä¸Šã«å°ã•ãè¡¨ç¤ºï¼‰ */
.tile-skill-badge {
    position: absolute;
    top: 2px;
    right: 2px;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: var(--z-tile-skill);
    pointer-events: none;
    border: 2px solid;
}

.tile-skill-badge img {
    width: 14px;
    height: 14px;
    object-fit: contain;
    filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.5));
}

/* ã‚«ãƒ†ã‚´ãƒªåˆ¥ãƒãƒƒã‚¸è‰²ï¼ˆæ”»æ’ƒ=èµ¤ã€é˜²å¾¡=ç·‘ã€åŠ¹æœ=é’ï¼‰ */
.tile-skill-badge.cat-attack {
    border-color: #ff3366;
    background: rgba(255, 51, 102, 0.9);
}
.tile-skill-badge.cat-defense {
    border-color: #22c55e;
    background: rgba(34, 197, 94, 0.9);
}
.tile-skill-badge.cat-effect {
    border-color: #3b82f6;
    background: rgba(59, 130, 246, 0.9);
}

/* ãƒ¬ã‚¢ãƒªãƒ†ã‚£åˆ¥å…‰ã‚Š */
.tile-skill-badge.rarity-1 { }
.tile-skill-badge.rarity-2 { 
    box-shadow: 0 0 4px rgba(34, 197, 94, 0.8);
}
.tile-skill-badge.rarity-3 { 
    box-shadow: 0 0 6px rgba(59, 130, 246, 0.8);
}
.tile-skill-badge.rarity-4 { 
    box-shadow: 0 0 8px rgba(251, 191, 36, 0.9);
    animation: badgeGlow4 1.5s ease-in-out infinite;
}
.tile-skill-badge.rarity-5 { 
    box-shadow: 0 0 10px rgba(244, 114, 182, 0.9);
    animation: badgeGlow5 1s ease-in-out infinite;
}

@keyframes badgeGlow4 {
    0%, 100% { box-shadow: 0 0 6px rgba(251, 191, 36, 0.7); }
    50% { box-shadow: 0 0 12px rgba(251, 191, 36, 1); }
}
@keyframes badgeGlow5 {
    0%, 100% { box-shadow: 0 0 8px rgba(244, 114, 182, 0.7); }
    50% { box-shadow: 0 0 16px rgba(244, 114, 182, 1); }
}

.player-area .tile.attack-target::after {
    content: 'âš”ï¸';
    position: absolute;
    top: -5px;
    right: -5px;
    font-size: 0.6rem;
    background: var(--bg-primary);
    border-radius: 50%;
    padding: 2px;
}

.back-btn {
    position: absolute;
    top: 8px;
    right: 8px;
    width: 28px;
    height: 28px;
    background: var(--bg-card);
    border: 2px solid var(--text-secondary);
    border-radius: 50%;
    color: var(--text-secondary);
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.2s ease;
    z-index: var(--z-screen);
}

.back-btn:hover {
    border-color: var(--accent-red);
    color: var(--accent-red);
}

/* ========================================
   çµæœç”»é¢
   ======================================== */
#result-screen {
    background: rgba(255, 255, 255, 0.95);
    align-items: center;
    justify-content: center;
}

.result-container {
    text-align: center;
    padding: 40px;
}

.result-title {
    font-family: 'Orbitron', sans-serif;
    font-size: 2.5rem;
    font-weight: 900;
    margin-bottom: 30px;
}

.result-title.victory {
    background: linear-gradient(135deg, var(--accent-cyan), var(--accent-green));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: glow 1s ease infinite alternate;
}

.result-title.defeat {
    color: var(--accent-red);
}

.result-stats {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-bottom: 35px;
}

.stat {
    display: flex;
    justify-content: space-between;
    padding: 10px 20px;
    background: var(--bg-card);
    border-radius: 8px;
    min-width: 240px;
}

.stat.rewards {
    border: 1px solid var(--accent-yellow);
}

.stat-label {
    color: var(--text-secondary);
}

.stat-value {
    font-family: 'Orbitron', sans-serif;
    font-weight: 700;
    color: var(--accent-cyan);
}

.result-buttons {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.menu-btn {
    width: 100%;
    padding: 14px 30px;
    font-size: 1rem;
    font-weight: 700;
    border: 2px solid var(--accent-cyan);
    background: transparent;
    color: var(--text-primary);
    border-radius: 12px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    transition: all 0.3s ease;
}

.menu-btn.primary {
    background: linear-gradient(135deg, var(--accent-cyan), var(--accent-pink));
    border: none;
    box-shadow: 0 0 20px rgba(0, 245, 255, 0.3);
}

.result-buttons .menu-btn {
    min-width: 200px;
}

/* ========================================
   ã‚¹ã‚­ãƒ«å¼¾æ¼”å‡º
   ======================================== */
.skill-bullet {
    position: absolute;
    width: 40px;
    height: 40px;
    font-size: 1.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    z-index: var(--z-skill-bullet);
    pointer-events: none;
    animation: skillBulletFly 0.5s ease-out forwards;
}

.skill-bullet img {
    width: 28px;
    height: 28px;
    object-fit: contain;
}

.skill-bullet.player-bullet {
    background: radial-gradient(circle, var(--accent-cyan), rgba(0, 245, 255, 0.3));
    box-shadow: 0 0 30px var(--accent-cyan), 0 0 60px var(--accent-cyan);
}

.skill-bullet.enemy-bullet {
    background: radial-gradient(circle, var(--accent-red), rgba(255, 51, 102, 0.3));
    box-shadow: 0 0 30px var(--accent-red), 0 0 60px var(--accent-red);
}

@keyframes skillBulletFly {
    0% { transform: translate(0, 0) scale(0.5); opacity: 1; }
    50% { transform: translate(calc(var(--end-x) * 0.5), calc(var(--end-y) * 0.5)) scale(1.2); opacity: 1; }
    100% { transform: translate(var(--end-x), var(--end-y)) scale(1); opacity: 0; }
}

/* ========================================
   ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
   ======================================== */
.damage-effect {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-family: 'Orbitron', sans-serif;
    font-size: 3rem;
    font-weight: 900;
    color: var(--accent-red);
    text-shadow: 0 0 20px var(--accent-red);
    animation: damageFloat 0.8s ease forwards;
    z-index: var(--z-skill-bullet);
    pointer-events: none;
}

@keyframes damageFloat {
    0% { opacity: 1; transform: translate(-50%, -50%) scale(0.5); }
    50% { opacity: 1; transform: translate(-50%, -70%) scale(1.2); }
    100% { opacity: 0; transform: translate(-50%, -100%) scale(1); }
}

/* ========================================
   ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–
   ======================================== */
@media (max-width: 400px) {
    .enemy-area .game-board { width: min(65vw, 190px); height: min(65vw, 190px); }
    .player-area .game-board { width: min(85vw, 310px); height: min(85vw, 310px); }
    .player-area .tile { font-size: 1.1rem; }
    .enemy-area .tile { font-size: 0.6rem; }
    .battle-log { font-size: 0.75rem; }
    .title-1024 { font-size: 3rem; }
    .vs-button { width: 150px; height: 150px; }
    .vs-text { font-size: 1.6rem; }
}

@media (max-height: 650px) {
    .game-container { padding: 4px; gap: 3px; }
    .enemy-area .game-board { width: min(55vw, 170px); height: min(55vw, 170px); }
    .player-area .game-board { width: min(75vw, 280px); height: min(75vw, 280px); }
    .battle-log { font-size: 0.7rem; }
}
